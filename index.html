<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pacman</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000;
        }
        #container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgb(0, 0, 255); /* Blå bakgrund för väggarna */
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #game-area {
            display: grid;
            grid-template-columns: repeat(36, 1fr); 
            grid-template-rows: repeat(28, 1fr); 
            width: 80vmin; /* Gör spelet kvadratiskt */
            height: 80vmin; /* Gör spelet kvadratiskt */
            background-color: #2e2e2e;
        }
        #pacman {
            grid-column: 0; 
            grid-row: 0;
            width: 100%; 
            height: 100%;
            background-color: yellow;
            border-radius: 50%;
        }
        .dot {
            width: 20%; 
            height: 20%;
            background-color: rgb(255, 191, 191);
            border-radius: 50%;
            justify-self: center;
            align-self: center;
        }
        .wall {
            background-color: rgb(0, 0, 0);
            border: 2px solid rgb(0, 0, 255);
            margin: 10px;
            border-radius: 17px;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="game-area">
            <div id="pacman"></div>
        </div>
    </div>
    <script>
        const pacman = document.getElementById('pacman');
        const gameArea = document.getElementById('game-area');
        let pacmanPosition = { x: 23, y: 20 }; 
        let direction = { x: 0, y: 0 }; 
        const moveSpeed = 4; 
        let lastTimestamp = 0; 

        function createDots() {
            for (let row = 2; row <= 26; row+=1) { 
                for (let col = 2; col <= 36; col+=1) { 
                    const dot = document.createElement('div');
                    dot.classList.add('dot');
                    dot.style.gridColumn = col;
                    dot.style.gridRow = row;
                    gameArea.appendChild(dot);
                }
            }
        }

        function createWalls() {
            const walls = [
                { colStart: 1, colEnd: 36, rowStart: 1, rowEnd: 1 }, // Övre väggen
                { colStart: 1, colEnd: 36, rowStart: 28, rowEnd: 28 }, // Nedre väggen
                { colStart: 1, colEnd: 1, rowStart: 1, rowEnd: 28 }, // Vänster vägg
                { colStart: 36, colEnd: 36, rowStart: 1, rowEnd: 28 } // Höger vägg
            ];

            walls.forEach(wallData => {
                const wall = document.createElement('div');
                wall.classList.add('wall');
                wall.style.gridColumn = `${wallData.colStart} / ${wallData.colEnd + 1}`;
                wall.style.gridRow = `${wallData.rowStart} / ${wallData.rowEnd + 1}`;
                gameArea.appendChild(wall);
            });
        }

        function movePacman(timestamp) {
            if (!lastTimestamp) {
                lastTimestamp = timestamp;
            }

            const deltaTime = (timestamp - lastTimestamp) / 1000;
            const distance = moveSpeed * deltaTime; 

            
            pacmanPosition.x += direction.x * distance;
            pacmanPosition.y += direction.y * distance;

            
            pacmanPosition.x = Math.max(1, Math.min(36, pacmanPosition.x));
            pacmanPosition.y = Math.max(1, Math.min(28, pacmanPosition.y));

            
            pacman.style.gridColumn = Math.round(pacmanPosition.x);
            pacman.style.gridRow = Math.round(pacmanPosition.y);

         
            pacman.style.transform = `translate(${(pacmanPosition.x - Math.round(pacmanPosition.x)) * 100 / 50}%, ${(pacmanPosition.y - Math.round(pacmanPosition.y)) * 100 / 28}%)`;

            
            const dots = document.querySelectorAll('.dot');
            dots.forEach(dot => {
                const dotCol = parseInt(dot.style.gridColumn);
                const dotRow = parseInt(dot.style.gridRow);
                if (dotCol === Math.round(pacmanPosition.x) && dotRow === Math.round(pacmanPosition.y)) {
                    dot.remove(); 
                }
            });

            lastTimestamp = timestamp; 
            requestAnimationFrame(movePacman); 
        }

        document.addEventListener('keydown', (event) => {
            switch (event.key) {
                case 'ArrowUp':
                    direction = { x: 0, y: -1 };
                    break;
                case 'ArrowDown':
                    direction = { x: 0, y: 1 };
                    break;
                case 'ArrowLeft':
                    direction = { x: -1, y: 0 };
                    break;
                case 'ArrowRight':
                    direction = { x: 1, y: 0 };
                    break;
            }
        });

        // Initiera spelet
        createDots();
        createWalls();
        requestAnimationFrame(movePacman); // Starta animationen
    </script>
</body>
</html>